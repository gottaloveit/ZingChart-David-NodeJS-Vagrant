extends ../layouts/default

block css
    style.
        .site-header .logo {
            opacity: 0;
            animation: apparate 2s 1s;
            /* -webkit-animation: apparate 2s 1s; */
        }

block content
    .fancy-border-bottom.text-center
        div(id="chart")
        h1 Real-Time Location Analytics
        .lead As you move, your data moves with you. <a href='http://en.wikipedia.org/wiki/Spatial_analysis#Spatial_regression', target='_blank'>Sweet Spots</a> are everywhere, we just help guide you there.
        .buttons
            a(href='http://github.com/JedWatson/keystone-demo', target='_blank', title='View on GitHub').btn.btn-primary View on GitHub
            a(href='http://www.keystonejs.com/guide', target='_blank', title='KeystoneJS Documentation').btn.btn-link Read the Docs

    .row.cards
        .col-sm-6
            .card.card--secondary: a(href='/blog')
                span.entypo.entypo-docs.card__icon
                .card__body
                    h3.card__title Blog
                    //- p Simple example blog with posts and categories.
                    p Posts have a slug automatically generated from their title, and support short and extended versions of the content.
                    p You can sign in using the demo account to contribute to the blog.
                    .card__button Check it out
            .card.card--tertiary: a(href='/keystone/signin')
                span.entypo.entypo-lock.card__icon
                .card__body
                    h3.card__title Session Management
                    p Keystone includes session management and default sign-in and sign-out views.
                    //- p demo@keystonejs.com / demo
                    p
                        | E: demo@keystonejs.com
                        br
                        | P: demo
                    .card__button Sign in
            .card.card--success: a(href='/contact')
                span.entypo.entypo-mail.card__icon
                .card__body
                    h3.card__title Enquiries
                    p Simple contact form that validates input and logs enquiries to the database.
                    p You can sign in using the demo account to view the submitted enquiries.
                    .card__button Check it out
        .col-sm-6
            .card.card--important: a(href='/404')
                span.entypo.entypo-lock.card__icon
                .card__body
                    h3.card__title Error Handling
                    p The 404 and 500 views demonstrate how to set up error handlers for your application.
                    .card__button Check it out
            .card.card--inverse: a(href='/download/users')
                span.entypo.entypo-cloud.card__icon
                .card__body
                    h3.card__title Download CSV
                    p For an example of how to download a list in .csv format, see /routes/download/users.js.
                    p It uses the excellent node-csv library.
                    .card__button Download users.csv
            .card.card--primary: a(href='/gallery')
                span.entypo.entypo-picture.card__icon
                .card__body
                    h3.card__title Gallery
                    p Example of how to set up a page that displays multiple image galleries.
                    p Demonstrates usage of single and multi image fields and their resizing methods.
                    p You can sign in using the demo account to create and manage image galleries, and upload additional images
                    .card__button Check it out
    .fancy-border-top.text-center
        h2 What's this all about?
        p.lead
            a(href='http://keystonejs.com/', target='_blank') Keystone
            | is a
            a(href='http://nodejs.org/', target='_blank') Node.js
            | content management system and web application platform built on
            a(href='http://expressjs.com/') Express
            | and
            a(href='http://www.mongodb.org/', target='_blank') Mongo.
        p.lead
            a(href='http://github.com/JedWatson/keystone-demo', target='_blank', title='View on GitHub').btn.btn-primary View on GitHub
            a(href='http://www.keystonejs.com/guide', target='_blank', title='KeystoneJS Documentation').btn.btn-link Read the Docs
        p.text-muted
            | This demo site includes the latest versions of
            | <a href='http://getbootstrap.com/' target='_blank'>Bootstrap</a> (currently 3.0.2)
            | and <a href='http://www.jquery.com/' target='_blank'>jQuery</a> (currently 1.10.2)
            | so you can use it as a base to quickly start a new project.

block page-js
    script.
        $('.site-header').find('.logo').bind('animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd', function(e){
            $(this).css('opacity', '1');
        });

    script(src="js/lib/bower_components/zingchart/src/zingchart-html5-min.js")

    script.
        window.onload = function() {
        zingchart.render({
            id: "chart",
            data: {
                "type":"radar",
        "height": 500,
        "width": 640,
        "background-color":"white",
        "border-top":"3px solid #7e7e7e",
        "border-bottom":"3px solid #7e7e7e",
        "border-right":"3px solid #7e7e7e",
        "border-left":"3px solid #7e7e7e",
        "border-color":"black",
        "border-size":"5",
        "title":{
            "text":"API Data Streaming w/Live Analytics",
            "background-color":"none",
            "font-color":"000",
            "font-size":"22px"
        },
        "-background-color":"#fff",
        "legend":{
            "border-width":1,
            "layout":"x4",
            "font-size":"14px",
            "alpha":0,
            "y":"8%",
            "x":"10%",
            "shadow":0,
            "marker":{
                "type":"circle",
                "size":7,
                "border-color":"none"
            }
        },
        "plotarea":{
            "margin":"80px 50px 10px 50px"
        },
        "tooltip":{
            "text":"%t<br>%k Is %v",
            "shadow":0,
            "border-radius":3
        },
        "scale-k":{
            "background-color":"none",
            "-ref-angle":4,
            "values":["You Are Here (1429 N. Diamond)","3300 Block, E. Park St.","4400 Block Mission Ave.","1100 Block., S. University Ave.","2500 W. Santa Fe Dr."],
            "item":{
                "font-size":"14px",
                "padding-left":"30px",
                "padding-bottom":"15px",
                "-visible":false
            },
            "guide":{
                "line-color":"#818181",
                "line-style":"solid",
                "line-width":"2px",
                "items":[
                    {
                        "background-color":"#fff",
                        "tween":null
                    }
                ]
            },
            "tick":{
                "visible":false
            }
        },
        "scale-v":{
            "values":["Poor","Fair","Good","Very Good","Excellent"],
            "-visible":false,
            "ref-line":{
                "line-width":"1px",
                "line-color":"#818181"
            },
            "guide":{
                "-visible":false,
                "line-width":".5px",
                "line-style":"dashed"
            },
            "tick":{
                "-placement":"cross",
                "size":10,
                "line-width":".5px",
                "line-length":0.55,
                "line-color":"#818181"
            },
            "item":{
                "padding-left":"9.5px",
                "-padding-bottom":"12.5px",
                "font-size":"8px"
            }
        },
        "series":[
            {
                "values":["Fair","Poor","Good","Very Good","Good"],
                "aspect":"line",
                "text":"Parcels 10-14",
                "line-color":"#999999",
                "background-color":"none",
                "line-width":"4px",
                "alpha":"0.35",
                "marker":{
                    "background-color":"#999999",
                    "size":"4",
                    "border-color":"#999999",
                    "alpha":"0.55"
                },
                "palette":0
            },
            {
                "values":["Fair","Poor","Excellent","Excellent","Good"],
                "aspect":"line",
                "text":"Parcels 15-19",
                "line-color":"#666666",
                "line-width":"4px",
                "alpha":"0.85",
                "marker":{
                    "background-color":"#666666",
                    "size":"4",
                    "border-color":"#666666",
                    "alpha":"0.55"
                },
                "palette":1
            },
            {
                "values":["Very Good","Excellent","Very Good","Good","Excellent"],
                "aspect":"line",
                "text":"Parcels 20-24",
                "line-color":"#BBDFFF",
                "line-width":"4px",
                "alpha":"0.45",
                "marker":{
                    "background-color":"#BBDFFF",
                    "size":"4",
                    "border-color":"#BBDFFF",
                    "alpha":"0.55"
                },
                "palette":2
            },
            {
                "values":["Poor","Very Good","Good","Good","Very Good"],
                "aspect":"line",
                "text":"Parcels 25-29",
                "line-color":"#6fbbff",
                "line-width":"4px",
                "alpha":"0.85",
                "marker":{
                    "background-color":"#6fbbff",
                    "size":"4",
                    "border-color":"#6fbbff",
                    "alpha":"0.55"
                },
                "palette":3
            }
        ]
            }
        });
        };

    script.
        console.log( $('#chart-top').height() );

    script.
        console.log('holla');

    script.
        $( "#chart-top" ).load(function() {
          $("#chart-top").css("height","700px");
        });

        $( "#chart-top" ).bind('load', function() {
          $("#chart-top").css("height","700px");
        });

    script.
        $("#chart-top").css("height","700px");

    script.
        $(window).bind("load", function() {
           //$("#chart-top").css("height","700px");
            console.log( $('#chart-top').height() );
        });